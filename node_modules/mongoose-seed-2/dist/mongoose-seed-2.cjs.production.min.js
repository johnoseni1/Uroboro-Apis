"use strict";function n(n){return n&&"object"==typeof n&&"default"in n?n.default:n}var t=n(require("mongoose")),e=n(require("chalk"));function r(){return(r=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}const o=function(){function n(){}return n.prototype.then=function(t,e){const r=new n,o=this.s;if(o){const n=1&o?t:e;if(n){try{i(r,1,n(this.v))}catch(n){i(r,2,n)}return r}return this}return this.o=function(n){try{const o=n.v;1&n.s?i(r,1,t?t(o):o):e?i(r,1,e(o)):i(r,2,o)}catch(n){i(r,2,n)}},r},n}();function i(n,t,e){if(!n.s){if(e instanceof o){if(!e.s)return void(e.o=i.bind(null,n,t));1&t&&(t=e.s),e=e.v}if(e&&e.then)return void e.then(i.bind(null,n,t),i.bind(null,n,2));n.s=t,n.v=e;const r=n.o;r&&r(n)}}function c(n){return n instanceof o&&1&n.s}const u="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function s(n,t,e){if("function"==typeof n[u]){var r,s,f,a=n[u]();if(function n(u){try{for(;!((r=a.next()).done||e&&e());)if((u=t(r.value))&&u.then){if(!c(u))return void u.then(n,f||(f=i.bind(null,s=new o,2)));u=u.v}s?i(s,1,u):s=u}catch(n){i(s||(s=new o),2,n)}}(),a.return){var l=function(n){try{r.done||a.return()}catch(n){}return n};if(s&&s.then)return s.then(l,function(n){throw l(n)});l()}return s}if(!("length"in n))throw new TypeError("Object is not iterable");for(var h=[],d=0;d<n.length;d++)h.push(n[d]);return function(n,t,e){var r,u,s=-1;return function f(a){try{for(;++s<n.length&&(!e||!e());)if((a=t(s))&&a.then){if(!c(a))return void a.then(f,u||(u=i.bind(null,r=new o,2)));a=a.v}r?i(r,1,a):r=a}catch(n){i(r||(r=new o),2,n)}}(),r}(h,function(n){return t(h[n])},e)}var f;"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))),function(n){n[n.CONNECTED=1]="CONNECTED"}(f||(f={}));var a={useNewUrlParser:!0,useCreateIndex:!0};exports.Seeder=function(){function n(n,t){void 0===t&&(t=a),this.mongoUrl=n,this.options=t,this.options=r({},a,{},this.options)}var o=n.prototype;return o.connect=function(){try{var n=this,e=function(){if(t.connection.readyState!==f.CONNECTED)return Promise.resolve(t.connect(n.mongoUrl,n.options)).then(function(){})}();return e&&e.then?e.then(function(){}):void 0}catch(n){return Promise.reject(n)}},o.validateModels=function(n){try{var e=n.filter(function(n){return!t.modelNames().includes(n)});if(e.length)throw new Error("Models not registered in Mongoose: "+e)}catch(n){return Promise.reject(n)}},o.clearModels=function(n){try{var e=this;return Promise.resolve(e.connect()).then(function(){return Promise.resolve(e.validateModels(n)).then(function(){n.forEach(function(n){try{return Promise.resolve(t.model(n).deleteMany({})).then(function(){console.log(n+"s collection cleared")})}catch(n){return Promise.reject(n)}})})})}catch(n){return Promise.reject(n)}},o.populateModels=function(n){try{var r=this;return Promise.resolve(r.connect()).then(function(){var o=Object.entries(n),i=o.reduce(function(n,t){return[].concat(n,[t[0]])},[]);return Promise.resolve(r.validateModels(i)).then(function(){return s(o,function(n){var r=n[0],o=n[1],i=t.model(r);return s(o,function(n){var t=function(t,e){try{var r=Promise.resolve(i.create(n)).then(function(){})}catch(n){return e()}return r&&r.then?r.then(void 0,e):r}(0,function(){console.error(e.red("Error creating document at index "+o.indexOf(n)+" of "+r+" model"))});if(t&&t.then)return t.then(function(){})})})})})}catch(n){return Promise.reject(n)}},o.disconnect=function(){try{return Promise.resolve(t.disconnect()).then(function(){})}catch(n){return Promise.reject(n)}},n}();
//# sourceMappingURL=mongoose-seed-2.cjs.production.min.js.map
